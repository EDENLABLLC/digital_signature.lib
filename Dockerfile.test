FROM elixir:1.6

ADD . /home/digital_signature.lib
WORKDIR /home/digital_signature.lib

ENV MIX_ENV=test
ENV LD_LIBRARY_PATH=/home/digital_signature.lib/priv:$LD_LIBRARY_PATH
ENV CC=gcc-6

RUN ln -s /home/digital_signature.lib/priv/libUACryptoQ.so /home/digital_signature.lib/priv/libUACryptoQ.so.1

RUN mix do \
      local.hex --force, \
      local.rebar --force, \
      deps.get, \
      deps.compile
